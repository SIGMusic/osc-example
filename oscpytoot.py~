import OSC
from OSC import OSCBundle
import time
import math

client = OSC.OSCClient()
send_address = '127.0.0.1', 9002
recieve_address = '127.0.0.1', 9001
client.connect( send_address )
#s = OSC.OSCServer( recieve_address )
#s.addDefaultHandlers()

def makeMsg(address, content):
    msg = OSC.OSCMessage()
    msg.setAddress(address)
    msg.append(content)
    return msg

while 1:
    ang = 0
    volume = 0.5 + 0.5*math.sin(ang)
    pitch = 440 + math.pow(2, math.floor(ang))
    msg1 = makeMsg("/vol", volume)
    msg2 = makeMsg("/pitch", pitch)
    
    client.send(msg1)
    client.send(msg2)
    ang = ang +0.01
    
    time.sleep(0.01)
    print ang
